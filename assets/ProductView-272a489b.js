import{_ as S,R as x,a as m,L as C,m as T,c as d,b as t,t as r,d as p,w as _,g as E,J as I,F as a,y as g,f as B,r as u,o as l,e as L,z as A,K as N,I as q,u as D,x as M}from"./index-4d612c4f.js";import{A as R,N as U,S as $,a as z}from"./navigation.min-649c5593.js";import{c as v}from"./cart-c10a6494.js";const{VITE_API:w,VITE_PATH:b}={VITE_API:"https://vue3-course-api.hexschool.io/v2/",VITE_PATH:"qoqvuedemo",BASE_URL:"/Vite_week6/",MODE:"production",DEV:!1,PROD:!0},F={name:"ProductView",data(){return{product:{},products:[],similarProducts:[],qty:1,modules:[R,U],navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},id:""}},components:{RouterView:x,Swiper:$,SwiperSlide:z},methods:{...m(v,["addToCart","getCarts"]),...m(C,["showLoading","hideLoading"]),getProducts(){this.showLoading(),this.$http.get(`${w}api/${b}/product/${this.id}`).then(e=>{this.product=e.data.product,this.getCategoryProducts(),this.hideLoading()}).catch(e=>{var i,n;const c=((n=(i=e.response)==null?void 0:i.data)==null?void 0:n.message)||"資料錯誤";this.hideLoading(),this.$swal.fire({toast:!0,position:"top",icon:"error",title:`${c}`,showConfirmButton:!1,timer:1500})})},getCategoryProducts(){const{category:e,id:c}=this.product;this.$http.get(`${w}api/${b}/products/all`).then(i=>{const{products:n}=i.data;this.products=n}).catch(i=>{alert(i.response.data.message)}),this.similarProducts=this.products.filter(i=>i.category===e&&i.id!==c)},toggleId(e){this.$router.push(`/product/${e}`),this.id=e,this.getProducts()}},computed:{...T(v,["cart"])},created(){const{id:e}=this.$route.params;this.id=e,this.getProducts()},mounted(){this.getProducts()}},h=e=>(D("data-v-65ee02bd"),e=e(),M(),e),H={class:"container text-custom_medium-green"},O={class:"row mt-3"},J={class:"col-lg-5"},K=["src","alt"],j={class:"col-lg-7"},G={class:"row list-unstyled"},Q={class:"col-md-6 mt-4"},W={class:"mt-3 fw-bold"},X={class:"col-md-6"},Y={"aria-label":"breadcrumb"},Z={class:"breadcrumb list-unstyled py-3"},tt={class:"breadcrumb-item"},et={class:"breadcrumb-item active","aria-current":"page"},st={class:"badge bg-custom_dark-green rounded-pill"},ot={class:"mt-5"},it={class:"input-group mt-5 w-75"},rt=["value"],ct=h(()=>t("hr",null,null,-1)),nt=h(()=>t("h3",{class:"mt-7"},"類似商品",-1)),lt={class:"card"},dt=["onClick"],at=h(()=>t("div",{class:"overlay"},null,-1)),ut=[at],pt={class:"card-body"},_t={class:"card-title"},ht={class:"text-right pr-2"};function mt(e,c,i,n,s,y){const P=u("router-link"),f=u("swiper-slide"),V=u("swiper"),k=u("router-view");return l(),d(a,null,[t("div",H,[t("div",O,[t("div",J,[t("img",{src:s.product.imageUrl,alt:s.product.title,class:"w-100",height:"400"},null,8,K)]),t("div",j,[t("ul",G,[t("li",Q,[t("h4",W,r(s.product.title),1)]),t("li",X,[t("nav",Y,[t("ul",Z,[t("li",tt,[p(P,{to:"/products"},{default:_(()=>[L("全部商品")]),_:1})]),t("li",et,r(s.product.title),1)])])]),t("li",null,[t("span",st,r(s.product.category),1)]),t("li",null,[t("p",ot,"描述："+r(s.product.description),1)]),t("li",null,[t("p",null,"內容："+r(s.product.content),1)]),t("li",null,[t("h5",null,"NT$ "+r(s.product.price),1)]),t("div",it,[E(t("select",{class:"form-select","onUpdate:modelValue":c[0]||(c[0]=o=>s.qty=o)},[(l(),d(a,null,g(20,o=>t("option",{value:o,key:o+"1233"},r(o),9,rt)),64))],512),[[I,s.qty]]),t("button",{type:"button",class:"btn btn-custom_btn-color text-white",onClick:c[1]||(c[1]=o=>e.addToCart(s.product.id,s.qty))}," 加入商品 ")])])])]),ct,s.similarProducts.length?(l(),d(a,{key:0},[nt,t("div",null,[p(V,{slidesPerView:1,spaceBetween:10,navigation:s.navigation,breakpoints:{425:{slidesPerView:1,spaceBetween:10},768:{slidesPerView:4,spaceBetween:10}},modules:s.modules,class:"mySwiper"},{default:_(()=>[(l(!0),d(a,null,g(s.similarProducts,o=>(l(),A(f,{key:o.id},{default:_(()=>[t("div",lt,[t("div",{style:N([{height:"300px","background-size":"cover","background-position":"center",cursor:"pointer",position:"relative"},{backgroundImage:`url(${o.imageUrl})`}]),onClick:q(gt=>y.toggleId(o.id),["prevent"])},ut,12,dt),t("div",pt,[t("h6",_t,r(o.title),1),t("div",ht,"NT$ "+r(o.price),1)])])]),_:2},1024))),128))]),_:1},8,["navigation","modules"])])],64)):B("",!0)]),p(k)],64)}const yt=S(F,[["render",mt],["__scopeId","data-v-65ee02bd"]]);export{yt as default};
